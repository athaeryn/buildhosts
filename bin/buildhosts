#!/usr/bin/env ruby

require 'buildhosts'

case ARGV[0]
when "-e"
    system("vim config")
when "-c"
    system("vim custom")
when "-ec"
    system("vim config ; vim custom")
when "-ce"
    system("vim custom ; vim config")
when "-l"
    system("grep 127.0.0.1 /etc/hosts | grep -Ev 'xip.io|localhost' | awk '{print $2}'")
    exit
when "--nginx", "-nginx"
    puts "Will run manginx"
    puts "Then reload nginx"
    exit
else
    puts "Usage: "
    exit
end

# Do all the stuff
puts "Building..."
Buildhosts::Main.build
system("")
system("cat header custom newhosts > temp")
system("sudo cp temp /etc/hosts")
system("rm newhosts temp")
puts "Done!"
